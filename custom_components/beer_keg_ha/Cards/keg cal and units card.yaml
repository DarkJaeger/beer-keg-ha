type: vertical-stack
cards:
  - type: markdown
    content: |
      ## üç∫ Keg Calibration & Units
      Select a keg, edit values, and save.
  - type: entities
    entities:
      - entity: select.keg_device
        name: Keg ID
      - entity: text.keg_d00d_keg_name
        name: Keg Name
      - entity: number.keg_d00d_full_weight_kg
        name: Full weight (kg)
      - entity: number.keg_d00d_weight_calibrate
        name: Weight calibrate
      - entity: number.keg_d00d_temp_calibrate_degc_2
        name: Temp calibrate (¬∞C)
      - entity: number.beer_keg_noise_deadband_kg
      - entity: number.beer_keg_smoothing_alpha
      - type: divider
      - entity: select.keg_weight_unit
        name: Display weight unit
      - entity: select.keg_temperature_unit
        name: Display temperature unit
      - entity: select.keg_volume_unit
  - type: horizontal-stack
    cards:
      - show_name: true
        show_icon: true
        type: button
        name: Save calibration
        icon: mdi:content-save
        tap_action:
          action: call-service
          service: beer_keg_ha.calibrate_keg
          service_data:
            id_entity: select.keg_device
            name_entity: text.keg_d00d_keg_name
            full_weight_entity: number.keg_d00d_full_weight_kg
            weight_calibrate_entity: number.keg_d00d_weight_calibrate
            temperature_calibrate_entity: number.keg_d00d_temp_calibrate_degc_2
      - type: button
        name: Apply units
        icon: mdi:tune-vertical
        tap_action:
          action: call-service
          service: beer_keg_ha.set_display_units
      - type: button
        name: Refresh
        icon: mdi:refresh
        tap_action:
          action: call-service
          service: beer_keg_ha.refresh_kegs
